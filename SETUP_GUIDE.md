# הדרכה מהירה להפעלת מערכת CRM כוללים

## התקנה והפעלה מקומית

### שלב 1: הכנת הסביבה
```bash
# פתח את Terminal/PowerShell בתיקיית הפרויקט
cd C:\Users\admin\CRM_KOLEL

# צור סביבה וירטואלית
python -m venv venv

# הפעל את הסביבה הוירטואלית
# Windows PowerShell:
venv\Scripts\Activate.ps1
# Windows CMD:
venv\Scripts\activate.bat
```

### שלב 2: התקנת חבילות
```bash
pip install -r requirements.txt
```

### שלב 3: אתחול בסיס הנתונים
```bash
python run.py init-db
```

### שלב 4: הפעלת השרת
```bash
python run.py
```

האתר יהיה זמין בכתובת: http://localhost:5000

## פרטי התחברות ראשונים
- **שם משתמש:** admin
- **סיסמה:** admin123

⚠️ **חשוב:** שנה את הסיסמה מיד לאחר ההתחברות הראשונה!

## שימוש ראשוני במערכת

### 1. הוספת סניף ראשון
1. התחבר כמנהל
2. עבור להגדרות → ניהול סניפים
3. הוסף סניף חדש (לדוגמה: "כולל ראשי")

### 2. יצירת פרופיל תשלום
1. עבור להגדרות → פרופילי תשלום
2. לחץ "הוסף פרופיל חדש"
3. הגדר:
   - שם: "מסלול רגיל"
   - שעות: 08:00 - 13:00
   - תשלום יומי: 150 ש"ח
   - אפשר קיזוז איחורים: 10 ש"ח לכל 15 דקות
4. הוסף בונוס "תענית דיבור": 10 ש"ח יומי

### 3. הוספת אברכים
1. עבור לאברכים → הוסף אברך חדש
2. מלא פרטים אישיים
3. בחר סניף ופרופיל תשלום
4. שמור

### 4. רישום נוכחות יומי
1. עבור לנוכחות → רישום יומי
2. הזן שעות כניסה ויציאה לכל אברך
3. סמן בונוסים במידת הצורך
4. שמור - המערכת תחשב אוטומטית איחורים וסכומים

### 5. הפקת דוח תשלומים
1. עבור לדוחות → דוח תשלומים חודשי
2. בחר חודש ושנה
3. לחץ "ייצא לCSV" לקבלת קובץ אקסל

## פתרון בעיות נפוצות

### השרת לא מתחיל
```bash
# בדוק שהסביבה הוירטואלית מופעלת
# ואז נסה:
pip install --upgrade flask
python run.py
```

### שגיאת בסיס נתונים
```bash
# מחק את בסיס הנתונים ויצר מחדש:
rm -f kolel_crm.db
python run.py init-db
```

### בעיות בעברית
המערכת תומכת במלואה בעברית. אם יש בעיות תצוגה, וודא שהדפדפן תומך ב-UTF-8.

## פריסה לייצור (Render/Heroku)

### Render:
1. העלה את הקוד ל-GitHub
2. צור חשבון ב-Render.com
3. חבר את הריפו
4. הגדר:
   - Build Command: `pip install -r requirements.txt`
   - Start Command: `python run.py`
5. הוסף משתני סביבה:
   - `SECRET_KEY`: מחרוזת סודית חזקה

### הגדרות נוספות:
- הוסף משתמשים נוספים דרך מסך הניהול
- הגדר ימי חופש בלוח השנה המערכתי
- התאם את פרופילי התשלום לצרכים הספציפיים

## תמיכה
לשאלות ובעיות, פנה לתמיכה או עיין בתיעוד המלא ב-README.md